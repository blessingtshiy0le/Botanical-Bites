<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Us - Botanical Bites</title>

    <!--========== BOX ICONS ==========-->
    <link href="https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />

    <style>
        /* Your existing styles */
        .contact__container {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }
        .contact__form {
            background-color: var(--container-color, #fff);
            padding: 2.5rem;
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
        }
        .contact__form h3 {
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1.5rem;
            color: var(--title-color);
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-color);
            font-weight: 600;
        }
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 1rem;
            border: 1px solid #ccc;
            border-radius: 0.75rem;
            font-size: 1rem;
            background-color: var(--input-color, #f9f9f9);
            transition: border 0.3s ease;
        }
        .form-group input:focus,
        .form-group textarea:focus {
            border-color: #069C54;
            outline: none;
        }
        .button {
            display: block;
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 0.75rem;
            background-color: #069C54;
            color: #fff;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .button:hover {
            background-color: #058b4a;
        }
        #form-status {
            text-align: center;
            margin-bottom: 1rem;
            font-weight: 600;
        }
    </style>

    <!-- Google reCAPTCHA -->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body>

    <!--========== SCROLL TOP ==========-->
    <a href="#" class="scrolltop" id="scroll-top">
        <i class="bx bx-chevron-up scrolltop__icon"></i>
    </a>

    <!--========== HEADER ==========-->
    <header class="l-header" id="header">
        <nav class="nav bd-container">
            <a href="#" class="nav__logo">Botanical Bites <i class="fa-solid fa-spa"></i></a>

            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list">
                    <li class="nav__item"><a href="index.html" class="nav__link">Home</a></li>
                    <li class="nav__item"><a href="about.html" class="nav__link">About</a></li>
                    <li class="nav__item"><a href="#services" class="nav__link">Services</a></li>
                    <li class="nav__item"><a href="#menu" class="nav__link">Menu</a></li>
                    <li class="nav__item"><a href="contact.html" class="nav__link active-link">Contact Us</a></li>
                    <li class="nav__item"><a href="promotions.html" class="nav__link">Promotions</a></li>
                    <li><i class="bx bx-moon change-theme" id="theme-button"></i></li>
                </ul>
            </div>

            <div class="nav__toggle" id="nav-toggle">
                <i class="bx bx-menu"></i>
            </div>
        </nav>
    </header>

    <!--========== CONTACT FORM SECTION ==========-->
    <main class="l-main">
        <section class="contact section bd-container" id="contact">
            <div class="contact__container">
                <form class="contact__form" id="contact-form">
                    <h3>Contact Botanical Bites</h3>

                    <div class="form-group">
                        <label for="name">Full Name</label>
                        <input type="text" id="name" name="name" required placeholder="e.g. Marcus Adams" />
                    </div>

                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" name="email" required placeholder="e.g. marcusadams@example.com" />
                    </div>

                    <div class="form-group">
                        <label for="subject">Subject</label>
                        <input type="text" id="subject" name="subject" required placeholder="e.g. Service inquiry" />
                    </div>

                    <div class="form-group">
                        <label for="message">Your Message</label>
                        <textarea id="message" name="message" rows="5" required placeholder="Write your message here..."></textarea>
                    </div>

                    <div class="form-group">
                        <div class="g-recaptcha" data-sitekey="6LdE_2ArAAAAAJwripOrZrmUN33fIj-S166CKyiB"></div>
                    </div>

                    <button type="submit" class="button">Submit</button>

                    <div id="form-status"></div>
                </form>
            </div>
        </section>
    </main>

    <!--========== FOOTER ==========-->
    <footer class="footer section bd-container">
        <p class="footer__copy">&#169; 2025 Botanical Bites. All rights reserved.</p>
    </footer>

    <!--========== JS ==========-->
    <script>
        // Theme toggle
        const scrollTop = document.getElementById("scroll-top");
        window.addEventListener("scroll", () => {
            scrollTop.classList.toggle("show-scroll", window.scrollY > 200);
        });

        const navToggle = document.getElementById("nav-toggle"),
            navMenu = document.getElementById("nav-menu");

        if (navToggle && navMenu) {
            navToggle.addEventListener("click", () => {
                navMenu.classList.toggle("show-menu");
            });
        }

        const themeButton = document.getElementById("theme-button");
        const darkTheme = "dark-theme";
        const iconTheme = "bx-sun";

        const selectedTheme = localStorage.getItem("selected-theme");
        const selectedIcon = localStorage.getItem("selected-icon");

        const getCurrentTheme = () =>
            document.body.classList.contains(darkTheme) ? "dark" : "light";
        const getCurrentIcon = () =>
            themeButton.classList.contains(iconTheme) ? "bx-moon" : "bx-sun";

        if (selectedTheme) {
            document.body.classList[selectedTheme === "dark" ? "add" : "remove"](darkTheme);
            themeButton.classList[selectedIcon === "bx-moon" ? "add" : "remove"](iconTheme);
        }

        themeButton.addEventListener("click", () => {
            document.body.classList.toggle(darkTheme);
            themeButton.classList.toggle(iconTheme);
            localStorage.setItem("selected-theme", getCurrentTheme());
            localStorage.setItem("selected-icon", getCurrentIcon());
        });

        // Contact form submit handler
        document.getElementById("contact-form").addEventListener("submit", async function (e) {
            e.preventDefault();

            const status = document.getElementById("form-status");

            if (grecaptcha.getResponse() === "") {
                status.style.color = "red";
                status.innerText = "Please complete the reCAPTCHA before submitting.";
                return;
            }

            // Prepare form data
            const formData = {
                name: this.name.value.trim(),
                email: this.email.value.trim(),
                subject: this.subject.value.trim(),
                message: this.message.value.trim(),
            };

            try {
                const response = await fetch("http://localhost:5000/api/messages", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(formData),
                });

                if (!response.ok) throw new Error("Network response was not ok");

                const data = await response.json();

                if (data.message) {
                    status.style.color = "green";
                    status.innerText = "✅ Your message has been sent successfully!";
                    this.reset();
                    grecaptcha.reset();
                } else {
                    throw new Error("Unexpected response from server");
                }
            } catch (error) {
                console.error(error);
                status.style.color = "red";
                status.innerText = "❌ There was an error sending your message. Please try again later.";
            }
        });
    </script>
</body>
</html>
